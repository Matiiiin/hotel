<?php

namespace Database\Seeders;
use database\seeders\BlogCategorySeeder;
use App\Models\BlogCategory;
use App\Models\BlogPost;
use App\Models\User;
use Illuminate\Database\Console\Seeds\WithoutModelEvents;
use Illuminate\Database\Seeder;

class BlogPostSeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
//        BlogPost::factory(20)->create();
//        function persianSlug($string) {
//            // Convert spaces to dashes
//            $slug = preg_replace('/\s+/u', '-', trim($string));
//
//            // Remove any non-word characters except dashes
//            $slug = preg_replace('/[^\p{L}\p{N}-]+/u', '', $slug);
//
//            // Convert to lowercase (optional for Persian)
//            return mb_strtolower($slug, 'UTF-8');
//        }
        $blogcategories = BlogCategory::all();
        $users = User::all();

        $posts = [
            [
                'post_titile' => 'راهنمای جامع مدیریت هتل',
                'short_descp' => 'مدیریت هتل یکی از حیاتی‌ترین بخش‌ها در صنعت گردشگری است. در این مقاله نکات کلیدی را بررسی می‌کنیم.',
                'long_descp' => 'مدیریت هتل به برنامه‌ریزی، سازماندهی و نظارت بر تمامی فعالیت‌های مربوط به اقامتگاه‌ها مربوط می‌شود. این فعالیت‌ها شامل پذیرش مهمان، نگهداری و تعمیرات، خدمات رفاهی و مدیریت منابع انسانی است.',
            ],
            [
                'post_titile' => 'چگونه تجربه مهمانان را بهبود دهیم؟',
                'short_descp' => 'تجربه مهمان یکی از عوامل کلیدی در موفقیت هتل‌ها است. در این مقاله به روش‌های بهبود این تجربه می‌پردازیم.',
                'long_descp' => 'یکی از عوامل مهم در صنعت هتلداری، توجه به رضایت مهمانان است. برای این منظور، ارائه خدمات با کیفیت بالا، توجه به نیازهای خاص مهمانان و ایجاد فضایی دلپذیر از جمله نکات حائز اهمیت است.',
            ],
            [
                'post_titile' => 'اهمیت رعایت بهداشت در هتل',
                'short_descp' => 'بهداشت در هتل‌ها اهمیت زیادی دارد و بر روی سلامت مهمانان تأثیر مستقیم می‌گذارد.',
                'long_descp' => 'بهداشت هتل‌ها شامل نظافت عمومی، ضدعفونی کردن اتاق‌ها و فضاهای عمومی، و همچنین ارائه لوازم بهداشتی به مهمانان است. رعایت این نکات به افزایش اعتبار هتل کمک می‌کند.',
            ],
            [
                'post_titile' => 'نکات کلیدی در بازاریابی هتل',
                'short_descp' => 'بازاریابی مؤثر نقش مهمی در جذب مشتریان جدید برای هتل‌ها ایفا می‌کند.',
                'long_descp' => 'استفاده از ابزارهای دیجیتال مارکتینگ، تبلیغات مناسب و توجه به بازخورد مهمانان از جمله روش‌های مهم در بازاریابی هتل‌ها محسوب می‌شوند.',
            ],
            [
                'post_titile' => 'چگونه یک رستوران هتلی موفق راه‌اندازی کنیم؟',
                'short_descp' => 'راه‌اندازی رستوران در هتل یکی از اصلی‌ترین فاکتورهای موفقیت در ارائه خدمات کامل به مهمانان است.',
                'long_descp' => 'برای راه‌اندازی یک رستوران موفق در هتل، باید به مواردی مانند انتخاب منوی مناسب، استفاده از مواد غذایی با کیفیت و آموزش کارکنان توجه ویژه‌ای داشت.',
            ],
            [
                'post_titile' => 'تحولات جدید در صنعت هتلداری',
                'short_descp' => 'صنعت هتلداری به سرعت در حال تغییر و تحول است و این تغییرات بر نحوه مدیریت هتل‌ها تأثیر می‌گذارند.',
                'long_descp' => 'استفاده از فناوری‌های نوین مانند هوش مصنوعی، اینترنت اشیا و نرم‌افزارهای مدیریت هتل، بخشی از تغییرات عمده‌ای هستند که صنعت هتلداری در سال‌های اخیر تجربه کرده است.',
            ],
            [
                'post_titile' => 'نکاتی برای مدیریت منابع انسانی در هتل',
                'short_descp' => 'مدیریت منابع انسانی در هتل‌ها شامل جذب، آموزش و ارزیابی کارکنان است.',
                'long_descp' => 'یک هتل موفق باید برنامه‌ای جامع برای جذب و آموزش کارکنان داشته باشد تا بتواند خدمات با کیفیتی به مهمانان ارائه دهد. ارزیابی مستمر عملکرد کارکنان نیز از اهمیت بالایی برخوردار است.',
            ],
            [
                'post_titile' => 'رعایت ایمنی در هتل‌ها',
                'short_descp' => 'ایمنی در هتل‌ها یکی از موارد مهمی است که باید توسط مدیریت هتل به آن توجه شود.',
                'long_descp' => 'برقراری سیستم‌های هشدار دهنده، آموزش کارکنان در زمینه مدیریت بحران و وجود برنامه‌های اضطراری از جمله اقدامات لازم برای افزایش سطح ایمنی در هتل‌ها هستند.',
            ],
            [
                'post_titile' => 'چگونه مشتریان وفادار برای هتل خود ایجاد کنیم؟',
                'short_descp' => 'ایجاد مشتریان وفادار یکی از مهم‌ترین اهداف هتل‌ها برای حفظ جایگاه در بازار رقابتی است.',
                'long_descp' => 'برگزاری برنامه‌های وفاداری، ارائه تخفیفات ویژه و توجه به نظرات مشتریان می‌تواند به افزایش وفاداری مشتریان هتل کمک کند.',
            ],
            [
                'post_titile' => 'راهنمای انتخاب بهترین تجهیزات برای هتل',
                'short_descp' => 'انتخاب تجهیزات مناسب برای هتل یکی از مهم‌ترین تصمیماتی است که تأثیر زیادی بر کیفیت خدمات دارد.',
                'long_descp' => 'از مبلمان و تجهیزات اتاق‌ها تا وسایل آشپزخانه، هر کدام باید با دقت انتخاب شوند تا رضایت مهمانان و کارایی کارکنان را تضمین کنند.',
            ]
        ];
        $imageNames = [
            'post(1).jpg',
            'post(2).jpg',
            'post(3).jpg',
            'post(4).jpg',
            'post(5).jpg',
            'post(6).jpg',
            'post(7).jpg',
            'post(8).jpg',
            'post(9).jpg',
            'post(10).jpg'
        ];

        foreach ($posts as $index =>$post) {
            BlogPost::create([
                'user_id' => $users->random()->id, // Pick a random user
                'blogcat_id' => $blogcategories->random()->id, // Pick a random category
                'post_titile' => $post['post_titile'],
                'post_slug' =>persianSlug($post['post_titile']),
                'post_image' => 'upload/post/post (' . $index+1 . ').jpg', // Generate random image URL
                'short_descp' => $post['short_descp'],
                'long_descp' => $post['long_descp'],
            ]);
        }
    }
}
